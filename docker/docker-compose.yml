services:
  api:
    build:
      context: ..
      dockerfile: docker/api.Dockerfile
      args:
        API_KEY: $ASTRA_API_KEY
    environment:
      ASTRA_BINARY_PATH: /usr/local/bin
      GENERATOR_DATA_PATH: "/data/generator"
      SIMULATION_DATA_PATH: "/data/simulation"
    volumes:
      - ${ASTRA_DATA_PATH:-data}:/app/data
    networks:
      - astra
    restart: unless-stopped

volumes:
  data:

networks:
  astra:
    driver: bridge